<main class="py-5 d-flex flex-column align-items-center">
  <h2 class="fw-bold text-center mb-5">ğŸ“… Your Bookings</h2>

  {{!-- Game Bookings --}}
<section class="booking-section w-100 mb-5 text-center">
  <h3 class="section-title text-success mb-4">ğŸ¾ Game Bookings</h3>
  <div class="row g-4 justify-content-center">
      <div class="col-md-6">
        <h5 class="text-center mb-3">Future Games</h5>
        {{#if futureGameBookings.length}}
          {{#each futureGameBookings}}
            <div class="card mb-4 text-center shadow-sm">
              <div class="card-body">
                <h5 class="card-title fw-semibold">{{this.title}}</h5>
                <p class="card-text text-muted">{{formatDate this.startTime}} | {{formatTime this.startTime}} â€“ {{formatTime this.endTime}}</p>
                <a href="/join/{{this._id}}" class="btn btn-outline-primary">View Game</a>
              </div>
            </div>
          {{/each}}
        {{else}}
          <p class="text-muted text-center">No upcoming games ğŸ¯</p>
        {{/if}}
      </div>

      <div class="col-md-6">
        <h5 class="text-center mb-3">Past Games</h5>
        {{#if pastGameBookings.length}}
          {{#each pastGameBookings}}
            <div class="card mb-4 text-center shadow-sm">
              <div class="card-body">
                <h5 class="card-title fw-semibold">{{this.title}}</h5>
                <p class="card-text text-muted">{{formatDate this.startTime}}</p>
                <button
                  class="btn btn-success btn-rate"
                  data-booking-id="{{this._id}}"
                  data-players='{{json this.players}}'
                >
                  â­ Rate Players
                </button>
              </div>
            </div>
          {{/each}}
        {{else}}
          <p class="text-muted text-center">No past games âŒ›</p>
        {{/if}}
      </div>
    </div>
  </section>

  {{!-- Gym Bookings --}}
  <section class="w-100 mb-5">
    <h3 class="text-primary text-center mb-4">ğŸ‹ï¸ Gym Bookings</h3>
    <div class="row justify-content-center">
      <div class="col-md-6">
        <h5 class="text-center mb-3">Future Sessions</h5>
        {{#if futureGymBookings.length}}
          {{#each futureGymBookings}}
            <div class="card mb-4 text-center shadow-sm">
              <div class="card-body">
                <h5 class="card-title fw-semibold">{{this.title}}</h5>
                <p class="card-text text-muted">{{formatDate this.dateTime}} {{formatTime this.dateTime}}</p>
                <a href="/gymBuddy/details/{{this._id}}" class="btn btn-outline-primary">View Session</a>
              </div>
            </div>
          {{/each}}
        {{else}}
          <p class="text-muted text-center">No upcoming sessions ğŸ‹ï¸</p>
        {{/if}}
      </div>

      <div class="col-md-6">
        <h5 class="text-center mb-3">Past Sessions</h5>
        {{#if pastGymBookings.length}}
          {{#each pastGymBookings}}
            <div class="card mb-4 text-center shadow-sm">
              <div class="card-body">
                <h5 class="card-title fw-semibold">{{this.title}}</h5>
                <p class="card-text text-muted">{{formatDate this.dateTime}}</p>
                <p class="text-muted small">Session complete âœ…</p>
              </div>
            </div>
          {{/each}}
        {{else}}
          <p class="text-muted text-center">No past sessions ğŸ’¤</p>
        {{/if}}
      </div>
    </div>
  </section>

  {{!-- Esports Bookings --}}
  <section class="w-100 text-center mb-5">
    <h3 class="text-warning">ğŸ® Esports Bookings</h3>
    <p class="text-muted">Coming soon! ğŸš€</p>
  </section>

  {{!-- Modal + Toast --}}
  <div id="rateModal" class="modal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-4">
        <h5 class="fw-bold text-center">â­ Rate Your Teammates</h5>
        <form id="rateForm" class="text-center">
          <div id="rateFields" class="my-3"></div>
          <div class="d-flex justify-content-center gap-3">
            <button type="submit" class="btn btn-primary">Submit Ratings</button>
            <button type="button" class="btn btn-secondary" id="rateCancel">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div id="toast-container" class="position-fixed bottom-0 end-0 p-3"></div>
</main>

<script src="/js/bookings.js"></script>
